<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Wajah Aneka - Game Match-3 dengan Emoji</title>
<meta name="description" content="Game match-3 dengan emoji wajah yang menyenangkan">
<meta name="theme-color" content="#ff6b6b">  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icon-192x192.png" sizes="192x192">
  <link rel="icon" href="icon-512x512.png" sizes="512x512">
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;touch-action:manipulation;-webkit-tap-highlight-color:transparent}
body{background:linear-gradient(135deg,#ff9a9e 0%,#fad0c4 100%);min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:20px;color:#333;overflow-x:hidden}
header{text-align:center;margin-bottom:20px;width:100%;max-width:500px}
h1{font-size:2.5rem;color:#ff6b6b;text-shadow:2px 2px 4px rgba(0,0,0,0.2);margin-bottom:10px}
.game-info{display:flex;justify-content:space-between;width:100%;max-width:500px;margin-bottom:20px;background-color:rgba(255,255,255,0.9);padding:15px 20px;border-radius:15px;box-shadow:0 5px 15px rgba(0,0,0,0.1)}
.score-container,.level-container{text-align:center;flex:1}
.score-label,.level-label{font-size:1rem;color:#666;margin-bottom:5px}
.score,.level{font-size:2rem;font-weight:bold;color:#ff6b6b}
.game-board{display:grid;grid-template-columns:repeat(8,1fr);gap:5px;width:100%;max-width:500px;aspect-ratio:1/1;background-color:rgba(255,255,255,0.9);padding:15px;border-radius:15px;box-shadow:0 5px 15px rgba(0,0,0,0.1);margin-bottom:20px;touch-action:none}
.emoji{display:flex;justify-content:center;align-items:center;font-size:1.8rem;border-radius:10px;background-color:rgba(255,255,255,0.7);transition:all 0.2s ease;user-select:none;cursor:pointer;box-shadow:0 2px 5px rgba(0,0,0,0.05)}
.emoji:hover{background-color:rgba(255,255,255,0.9);transform:scale(1.05)}
.emoji.selected{background-color:#ffd166;transform:scale(1.1);box-shadow:0 0 10px rgba(255,209,102,0.7)}
.emoji.matched{animation:matched 0.5s ease-out forwards}
@keyframes matched{0%{transform:scale(1);opacity:1}50%{transform:scale(1.2);opacity:0.7}100%{transform:scale(0);opacity:0}}
.controls{display:flex;gap:15px;margin-bottom:20px;width:100%;max-width:500px}
button{flex:1;padding:15px 20px;border:none;border-radius:50px;background:linear-gradient(to right,#ff6b6b,#ff9a9e);color:white;font-size:1rem;font-weight:bold;cursor:pointer;box-shadow:0 4px 8px rgba(0,0,0,0.2);transition:all 0.2s ease}
button:hover{transform:translateY(-3px);box-shadow:0 6px 12px rgba(0,0,0,0.2)}
button:active{transform:translateY(0);box-shadow:0 2px 4px rgba(0,0,0,0.2)}
.instructions{max-width:500px;background-color:rgba(255,255,255,0.9);padding:20px;border-radius:15px;box-shadow:0 5px 15px rgba(0,0,0,0.1);margin-bottom:20px}
.instructions h2{color:#ff6b6b;margin-bottom:15px;text-align:center}
.instructions p{margin-bottom:10px;line-height:1.5}
.swipe-info{background-color:rgba(255,255,255,0.9);padding:12px 20px;border-radius:50px;margin-bottom:15px;text-align:center;box-shadow:0 3px 8px rgba(0,0,0,0.1);display:none}
footer{margin-top:auto;text-align:center;padding:20px;color:#666;font-size:0.9rem}
@keyframes appear{from{transform:scale(0);opacity:0}to{transform:scale(1);opacity:1}}
.emoji.new{animation:appear 0.3s ease-out forwards}
.game-board.processing{opacity:0.7;pointer-events:none}
.level-up-modal{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.7);display:flex;justify-content:center;align-items:center;z-index:1000;opacity:0;pointer-events:none;transition:opacity 0.3s ease}
.level-up-modal.active{opacity:1;pointer-events:all}
.modal-content{background:white;padding:30px;border-radius:20px;text-align:center;max-width:80%;box-shadow:0 10px 25px rgba(0,0,0,0.2)}
.modal-content h2{color:#ff6b6b;margin-bottom:15px;font-size:1.8rem}
.modal-content p{margin-bottom:20px;font-size:1.2rem;color:#555}
.modal-emoji{font-size:3rem;margin:15px 0}
.combo-notification{position:absolute;font-size:1.5rem;font-weight:bold;color:#ff6b6b;animation:floatUp 1s ease-out forwards;pointer-events:none;z-index:100}
@keyframes floatUp{0%{transform:translateY(0);opacity:1}100%{transform:translateY(-50px);opacity:0}}
@media (max-width:520px){.game-board{padding:10px;gap:4px}.emoji{font-size:1.5rem}h1{font-size:2rem}.score,.level{font-size:1.8rem}.swipe-info{display:block}.controls{flex-direction:column}button{width:100%}}
@media (max-width:400px){.emoji{font-size:1.3rem}.game-info{padding:12px}.score,.level{font-size:1.6rem}.instructions{padding:15px}}
@media (max-height:700px){header{margin-bottom:15px}.game-info{margin-bottom:15px}.instructions{display:none}}
</style>
</head>
<body>
<header><h1>Wajah Aneka</h1><p>Game match-3 dengan emoji wajah yang menyenangkan!</p></header>
<div class="game-info"><div class="score-container"><div class="score-label">Poin</div><div class="score">0</div></div><div class="level-container"><div class="level-label">Level</div><div class="level">1</div></div></div>
<div class="swipe-info">Geser (swipe) emoji untuk menukar posisi</div>
<div class="game-board" id="gameBoard"></div>
<div class="controls"><button id="hintBtn">Bantuan</button><button id="shuffleBtn">Acak Ulang</button></div>
<div class="instructions"><h2>Cara Bermain</h2><p>1. Klik atau geser dua emoji yang berdekatan untuk menukar posisinya</p><p>2. Buat garis horizontal atau vertikal minimal 3 emoji yang sama untuk mencocokkannya</p><p>3. Dapatkan poin dan naik level setiap 1000 poin</p><p>4. Semakin tinggi level, semakin sulit permainan</p></div>
<div class="level-up-modal" id="levelUpModal"><div class="modal-content"><h2>Selamat!</h2><div class="modal-emoji">ðŸŽ‰</div><p>Anda mencapai level <span id="newLevel">1</span>!</p><button id="modalCloseBtn">Lanjutkan</button></div></div>
<footer><p>Game Wajah Aneka &copy; 2023 - Mainkan dan bagikan!</p></footer>
<script>
const basicEmojis=['ðŸ˜€','ðŸ˜ƒ','ðŸ˜„','ðŸ˜','ðŸ˜†','ðŸ˜…','ðŸ˜‚','ðŸ¤£','ðŸ˜Š','ðŸ˜‡','ðŸ™‚','ðŸ™ƒ','ðŸ˜‰','ðŸ˜Œ','ðŸ˜','ðŸ¥°','ðŸ˜˜','ðŸ˜—','ðŸ˜™','ðŸ˜š','ðŸ˜‹','ðŸ˜›','ðŸ˜','ðŸ˜œ','ðŸ¤ª','ðŸ¤¨','ðŸ§','ðŸ¤“','ðŸ˜Ž','ðŸ¤©','ðŸ¥³','ðŸ˜','ðŸ˜’','ðŸ˜ž','ðŸ˜”','ðŸ˜Ÿ','ðŸ˜•','ðŸ™','â˜¹ï¸','ðŸ˜£','ðŸ˜–','ðŸ˜«','ðŸ˜©','ðŸ¥º','ðŸ˜¢','ðŸ˜­','ðŸ˜¤','ðŸ˜ ','ðŸ˜¡','ðŸ¤¬','ðŸ¤¯','ðŸ˜³','ðŸ¥µ','ðŸ¥¶','ðŸ˜±','ðŸ˜¨','ðŸ˜°','ðŸ˜¥','ðŸ˜“','ðŸ«£','ðŸ¤—','ðŸ«¡','ðŸ¤”','ðŸ«¢','ðŸ¤­','ðŸ¤«','ðŸ¤¥','ðŸ˜¶','ðŸ« ','ðŸ˜','ðŸ«¤','ðŸ˜‘','ðŸ˜¬','ðŸ™„','ðŸ˜¯','ðŸ˜¦','ðŸ˜§','ðŸ˜®','ðŸ˜²','ðŸ¥±','ðŸ˜´','ðŸ¤¤','ðŸ˜ª','ðŸ˜µ','ðŸ«¥','ðŸ¤','ðŸ¥´','ðŸ¤¢','ðŸ¤®','ðŸ¤§','ðŸ˜·','ðŸ¤’','ðŸ¤•','ðŸ¤‘','ðŸ¤ ','ðŸ˜ˆ','ðŸ‘¿','ðŸ‘¹','ðŸ‘º','ðŸ¤¡','ðŸ’©','ðŸ‘»','ðŸ’€','â˜ ï¸','ðŸ‘½','ðŸ‘¾','ðŸ¤–','ðŸŽƒ','ðŸ˜º','ðŸ˜¸','ðŸ˜¹','ðŸ˜»','ðŸ˜¼','ðŸ˜½','ðŸ™€','ðŸ˜¿','ðŸ˜¾'];
const BOARD_SIZE=8;
const MIN_MATCH=3;
const POINTS_PER_MATCH=100;
const LEVEL_UP_SCORE=1000;
const COMBO_MULTIPLIER=1.2;
let score=0;
let level=1;
let board=[];
let isProcessing=false;
let selectedEmoji=null;
let comboCount=0;
let comboMultiplier=1;
const gameBoard=document.getElementById('gameBoard');
const scoreDisplay=document.querySelector('.score');
const levelDisplay=document.querySelector('.level');
const hintBtn=document.getElementById('hintBtn');
const shuffleBtn=document.getElementById('shuffleBtn');
const levelUpModal=document.getElementById('levelUpModal');
const newLevelDisplay=document.getElementById('newLevel');
const modalCloseBtn=document.getElementById('modalCloseBtn');
function initGame(){createBoard();updateDisplay();hintBtn.addEventListener('click',showHint);shuffleBtn.addEventListener('click',shuffleBoard);modalCloseBtn.addEventListener('click',closeModal);gameBoard.addEventListener('click',handleClick);gameBoard.addEventListener('touchstart',handleTouchStart,{passive:false});gameBoard.addEventListener('touchmove',handleTouchMove,{passive:false});gameBoard.addEventListener('touchend',handleTouchEnd);document.addEventListener('touchmove',function(e){if(e.touches.length>1)e.preventDefault()},{passive:false})}
function createBoard(){gameBoard.innerHTML='';board=[];for(let row=0;row<BOARD_SIZE;row++){board[row]=[];for(let col=0;col<BOARD_SIZE;col++){const emoji=getRandomEmoji();board[row][col]=emoji;const emojiElement=createEmojiElement(emoji,row,col);gameBoard.appendChild(emojiElement)}}while(findAllMatches().length>0)shuffleBoard()}
function createEmojiElement(emoji,row,col){const emojiElement=document.createElement('div');emojiElement.className='emoji';emojiElement.textContent=emoji;emojiElement.dataset.row=row;emojiElement.dataset.col=col;return emojiElement}
function getRandomEmoji(){const emojiCount=Math.min(10+level*2,basicEmojis.length);const randomIndex=Math.floor(Math.random()*emojiCount);return basicEmojis[randomIndex]}
function handleClick(event){if(isProcessing)return;const element=event.target;if(!element.classList.contains('emoji'))return;if(!selectedEmoji){selectedEmoji=element;element.classList.add('selected')}else{const row1=parseInt(selectedEmoji.dataset.row);const col1=parseInt(selectedEmoji.dataset.col);const row2=parseInt(element.dataset.row);const col2=parseInt(element.dataset.col);selectedEmoji.classList.remove('selected');if((Math.abs(row1-row2)===1&&col1===col2)||(Math.abs(col1-col2)===1&&row1===row2))swapEmojis(row1,col1,row2,col2);selectedEmoji=null}}
let touchStartX,touchStartY,touchElement;
function handleTouchStart(event){if(isProcessing)return;const touch=event.touches[0];touchStartX=touch.clientX;touchStartY=touch.clientY;touchElement=document.elementFromPoint(touchStartX,touchStartY);if(touchElement&&touchElement.classList.contains('emoji'))event.preventDefault()}
function handleTouchMove(event){if(!touchElement||isProcessing)return;event.preventDefault()}
function handleTouchEnd(event){if(!touchElement||isProcessing)return;const touch=event.changedTouches[0];const touchEndX=touch.clientX;const touchEndY=touch.clientY;const dx=touchEndX-touchStartX;const dy=touchEndY-touchStartY;const minSwipeDistance=20;if(Math.abs(dx)>minSwipeDistance||Math.abs(dy)>minSwipeDistance){const row=parseInt(touchElement.dataset.row);const col=parseInt(touchElement.dataset.col);let targetRow=row;let targetCol=col;if(Math.abs(dx)>Math.abs(dy))targetCol+=dx>0?1:-1;else targetRow+=dy>0?1:-1;if(targetRow>=0&&targetRow<BOARD_SIZE&&targetCol>=0&&targetCol<BOARD_SIZE)swapEmojis(row,col,targetRow,targetCol)}touchElement=null}
function swapEmojis(row1,col1,row2,col2){isProcessing=true;gameBoard.classList.add('processing');const temp=board[row1][col1];board[row1][col1]=board[row2][col2];board[row2][col2]=temp;updateBoardView();setTimeout(()=>{const matches=findAllMatches();if(matches.length===0){board[row2][col2]=board[row1][col1];board[row1][col1]=temp;updateBoardView();isProcessing=false;gameBoard.classList.remove('processing');checkAndShuffleIfNoMoves()}else{comboCount++;comboMultiplier=1+(comboCount*0.2);processMatches()}},300)}
function updateBoardView(){const emojiElements=gameBoard.querySelectorAll('.emoji');emojiElements.forEach(element=>{const row=parseInt(element.dataset.row);const col=parseInt(element.dataset.col);element.textContent=board[row][col]})}
function processMatches(){const matches=findAllMatches();if(matches.length===0){isProcessing=false;gameBoard.classList.remove('processing');comboCount=0;comboMultiplier=1;checkAndShuffleIfNoMoves();return}
removeMatches(matches);addScore(Math.floor(matches.length*POINTS_PER_MATCH*comboMultiplier));if(comboCount>1)showComboNotification(comboCount);setTimeout(()=>{fillBoard()},500)}
function findAllMatches(){const matches=new Set();for(let row=0;row<BOARD_SIZE;row++){for(let col=0;col<BOARD_SIZE-2;col++){if(board[row][col]&&board[row][col]===board[row][col+1]&&board[row][col]===board[row][col+2]){let matchLength=3;while(col+matchLength<BOARD_SIZE&&board[row][col]===board[row][col+matchLength])matchLength++;for(let i=0;i<matchLength;i++)matches.add(`${row},${col+i}`);col+=matchLength-1}}}for(let col=0;col<BOARD_SIZE;col++){for(let row=0;row<BOARD_SIZE-2;row++){if(board[row][col]&&board[row][col]===board[row+1][col]&&board[row][col]===board[row+2][col]){let matchLength=3;while(row+matchLength<BOARD_SIZE&&board[row][col]===board[row+matchLength][col])matchLength++;for(let i=0;i<matchLength;i++)matches.add(`${row+i},${col}`);row+=matchLength-1}}}return Array.from(matches).map(coord=>{const[row,col]=coord.split(',').map(Number);return{row,col}})}
function removeMatches(matches){const emojiElements=gameBoard.querySelectorAll('.emoji');matches.forEach(match=>{const element=Array.from(emojiElements).find(el=>parseInt(el.dataset.row)===match.row&&parseInt(el.dataset.col)===match.col);if(element)element.classList.add('matched');board[match.row][match.col]=null})}
function fillBoard(){for(let col=0;col<BOARD_SIZE;col++){let emptySpaces=0;for(let row=BOARD_SIZE-1;row>=0;row--){if(board[row][col]===null)emptySpaces++;else if(emptySpaces>0){board[row+emptySpaces][col]=board[row][col];board[row][col]=null}}for(let row=0;row<emptySpaces;row++)board[row][col]=getRandomEmoji()}updateBoardView();setTimeout(()=>{const emojiElements=gameBoard.querySelectorAll('.emoji');emojiElements.forEach(element=>{element.classList.add('new');setTimeout(()=>element.classList.remove('new'),300)});setTimeout(()=>{const newMatches=findAllMatches();if(newMatches.length>0)processMatches();else{isProcessing=false;gameBoard.classList.remove('processing');comboCount=0;comboMultiplier=1;checkAndShuffleIfNoMoves()}},400)},50)}
function hasValidMoves(){for(let row=0;row<BOARD_SIZE;row++){for(let col=0;col<BOARD_SIZE;col++){if(col<BOARD_SIZE-1){const temp=board[row][col];board[row][col]=board[row][col+1];board[row][col+1]=temp;const hasMatch=findAllMatches().length>0;board[row][col+1]=board[row][col];board[row][col]=temp;if(hasMatch)return true}if(row<BOARD_SIZE-1){const temp=board[row][col];board[row][col]=board[row+1][col];board[row+1][col]=temp;const hasMatch=findAllMatches().length>0;board[row+1][col]=board[row][col];board[row][col]=temp;if(hasMatch)return true}}}return false}
function checkAndShuffleIfNoMoves(){if(!hasValidMoves())setTimeout(()=>{alert('Tidak ada gerakan yang valid! Mengacak ulang papan...');shuffleBoard()},300)}
function addScore(points){score+=points;const newLevel=Math.floor(score/LEVEL_UP_SCORE)+1;if(newLevel>level){level=newLevel;showLevelUpModal()}updateDisplay()}
function updateDisplay(){scoreDisplay.textContent=score;levelDisplay.textContent=level}
function showLevelUpModal(){newLevelDisplay.textContent=level;levelUpModal.classList.add('active')}
function closeModal(){levelUpModal.classList.remove('active')}
function shuffleBoard(){if(isProcessing)return;isProcessing=true;gameBoard.classList.add('processing');for(let row=0;row<BOARD_SIZE;row++)for(let col=0;col<BOARD_SIZE;col++)board[row][col]=getRandomEmoji();updateBoardView();if(!hasValidMoves())shuffleBoard();else{isProcessing=false;gameBoard.classList.remove('processing')}}
function showHint(){if(isProcessing)return;for(let row=0;row<BOARD_SIZE;row++){for(let col=0;col<BOARD_SIZE;col++){if(col<BOARD_SIZE-1){const temp=board[row][col];board[row][col]=board[row][col+1];board[row][col+1]=temp;const hasMatch=findAllMatches().length>0;board[row][col+1]=board[row][col];board[row][col]=temp;if(hasMatch){const emojiElements=gameBoard.querySelectorAll('.emoji');const firstElement=Array.from(emojiElements).find(el=>parseInt(el.dataset.row)===row&&parseInt(el.dataset.col)===col);const secondElement=Array.from(emojiElements).find(el=>parseInt(el.dataset.row)===row&&parseInt(el.dataset.col)===col+1);if(firstElement&&secondElement){firstElement.classList.add('selected');secondElement.classList.add('selected');setTimeout(()=>{firstElement.classList.remove('selected');secondElement.classList.remove('selected')},1000);return}}}if(row<BOARD_SIZE-1){const temp=board[row][col];board[row][col]=board[row+1][col];board[row+1][col]=temp;const hasMatch=findAllMatches().length>0;board[row+1][col]=board[row][col];board[row][col]=temp;if(hasMatch){const emojiElements=gameBoard.querySelectorAll('.emoji');const firstElement=Array.from(emojiElements).find(el=>parseInt(el.dataset.row)===row&&parseInt(el.dataset.col)===col);const secondElement=Array.from(emojiElements).find(el=>parseInt(el.dataset.row)===row+1&&parseInt(el.dataset.col)===col);if(firstElement&&secondElement){firstElement.classList.add('selected');secondElement.classList.add('selected');setTimeout(()=>{firstElement.classList.remove('selected');secondElement.classList.remove('selected')},1000);return}}}}}}
function showComboNotification(combo){const notification=document.createElement('div');notification.className='combo-notification';notification.textContent=`Combo x${combo}!`;notification.style.left=`${gameBoard.offsetLeft+gameBoard.offsetWidth/2-50}px`;notification.style.top=`${gameBoard.offsetTop+gameBoard.offsetHeight/2}px`;document.body.appendChild(notification);setTimeout(()=>{document.body.removeChild(notification)},1000)}
window.addEventListener('load',initGame);
</script>
</body>
</html>