<!DOCTYPE html><html lang="id"><head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Candy Crush 12x12</title>
<style>
body{font-family:sans-serif;text-align:center}
#board{display:grid;grid-template-columns:repeat(12,45px);gap:2px;margin:20px auto;width:max-content}
.cell{width:45px;height:45px;font-size:28px;display:flex;align-items:center;justify-content:center;border:1px solid #aaa;cursor:pointer;background:#fefefe}
.cell:hover{background:#f3f3f3}
</style></head><body>
<h2>üç¨ Candy Crush 12x12</h2><div id="board"></div><p id="info"></p>
<script>
const emojis=["üç¨","üç≠","üç´","üç™","üç©"],size=12;let board=[],firstPick=null;
const rand=()=>emojis[Math.floor(Math.random()*emojis.length)];
function createBoard(){board=[];for(let r=0;r<size;r++){board[r]=[];for(let c=0;c<size;c++){board[r][c]=rand();}}if(!hasAnyMove())shuffle();draw();}
function draw(){const el=document.getElementById("board");el.innerHTML="";for(let r=0;r<size;r++){for(let c=0;c<size;c++){let d=document.createElement("div");d.className="cell";d.textContent=board[r][c];d.onclick=()=>select(r,c);el.appendChild(d);}}}
function select(r,c){if(!firstPick){firstPick={r,c};}else{let {r:r1,c:c1}=firstPick;if(Math.abs(r1-r)+Math.abs(c1-c)===1){swap(r1,c1,r,c);if(check())crush();else swap(r1,c1,r,c);}firstPick=null;draw();}}
function swap(r1,c1,r2,c2){[board[r1][c1],board[r2][c2]]=[board[r2][c2],board[r1][c1]];}
function check(){for(let r=0;r<size;r++){for(let c=0;c<size-2;c++){if(board[r][c]===board[r][c+1]&&board[r][c]===board[r][c+2])return true;}}for(let c=0;c<size;c++){for(let r=0;r<size-2;r++){if(board[r][c]===board[r+1][c]&&board[r][c]===board[r+2][c])return true;}}return false;}
function crush(){let crush=false;for(let r=0;r<size;r++){for(let c=0;c<size-2;c++){if(board[r][c]&&board[r][c]===board[r][c+1]&&board[r][c]===board[r][c+2]){board[r][c]=board[r][c+1]=board[r][c+2]=null;crush=true;}}}for(let c=0;c<size;c++){for(let r=0;r<size-2;r++){if(board[r][c]&&board[r][c]===board[r+1][c]&&board[r][c]===board[r+2][c]){board[r][c]=board[r+1][c]=board[r+2][c]=null;crush=true;}}}if(crush){gravity();setTimeout(()=>{if(check())crush();else if(!hasAnyMove())shuffle();draw();},400);}}
function gravity(){for(let c=0;c<size;c++){let empty=[];for(let r=size-1;r>=0;r--){if(board[r][c]===null)empty.push(r);else if(empty.length>0){let er=empty.shift();board[er][c]=board[r][c];board[r][c]=null;empty.push(r);}}for(let r=0;r<size;r++){if(board[r][c]===null)board[r][c]=rand();}}}
function hasAnyMove(){for(let r=0;r<size;r++){for(let c=0;c<size;c++){if(c<size-1){swap(r,c,r,c+1);if(check()){swap(r,c,r,c+1);return true;}swap(r,c,r,c+1);}if(r<size-1){swap(r,c,r+1,c);if(check()){swap(r,c,r+1,c);return true;}swap(r,c,r+1,c);}}}return false;}
function shuffle(){do{for(let r=0;r<size;r++){for(let c=0;c<size;c++){board[r][c]=rand();}}}while(!hasAnyMove());document.getElementById("info").textContent="üîÑ Papan diacak ulang!";}
createBoard();
</script></body></html>